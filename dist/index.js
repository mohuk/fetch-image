"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="fetch.image"),function(e){"use strict";function t(){function e(e){i=e}function t(e){r=e}var r,i="Authorization";this.setHeaderKey=e,this.setImageAccessor=t,this.$get=function(){return{header:i,accessor:r}}}function r(e,t,r,i){return{restrict:"A",link:function(n,o,c){function s(){c.$set("src",c.alt)}var f=i(c.fiToken)(n),a=c.fiSrc,u=r.accessor||c.fiAcc||"",d={headers:{}};d.headers[r.header]=f,e.get(a,d).then(function(e){var r=t.parse(e,u);r?c.$set("src","data:image/jpeg;base64,"+r):s()},s)}}}function i(){function e(e,t){t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var r=t.split("."),i=0,n=r.length;n>i;++i){var o=r[i];if(!(o in e))return;e=e[o]}return e}return{parse:e}}r.$inject=["$http","fiUtils","fiConfig","$parse"],e.module("fetch.image",[]).provider("fiConfig",t).directive("fiSrc",r).factory("fiUtils",i)}(window.angular);